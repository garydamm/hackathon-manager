# Progress Log

## Learnings
(Patterns discovered during implementation)

---

## Iteration 16 - Create EventAttendeeRepository
- Created EventAttendeeRepository.kt extending JpaRepository
- Added methods: findByEventIdAndUserId, findByEventIdOrderByUserLastNameAscUserFirstNameAsc, existsByEventIdAndUserId, countByEventIdAndRsvpStatus, deleteByEventIdAndUserId
- Files changed:
  - src/main/kotlin/com/hackathon/manager/repository/EventAttendeeRepository.kt (created)
- Learnings for future iterations:
  - Repository pattern follows standard Spring Data JPA conventions
  - Method names follow query derivation pattern: findBy/existsBy/countBy/deleteBy + property combinations
  - EventAttendee entity already existed with proper relationships to ScheduleEvent and User
  - Repositories are simple interfaces - Spring generates implementation automatically
---

## Iteration 17 - Add EventAttendee DTOs
- Created EventAttendeeDtos.kt with all required DTOs
- Added EventAttendeeResponse with fromEntity() companion method that extracts user details from the EventAttendee entity
- Added RsvpRequest with @Pattern validation for rsvpStatus (attending|maybe|not_attending)
- Added MarkAttendanceRequest for single user attendance tracking
- Added BulkMarkAttendanceRequest for marking multiple users at once
- Files changed:
  - src/main/kotlin/com/hackathon/manager/dto/EventAttendeeDtos.kt (created)
  - PRD.md (marked US-002 complete)
- Learnings for future iterations:
  - DTO pattern follows existing codebase conventions with data classes and validation annotations
  - Response DTOs use companion object with fromEntity() factory method
  - Request DTOs use Jakarta validation annotations (@NotBlank, @NotNull, @Pattern)
  - @Pattern annotation validates enum-like string values for rsvpStatus
  - EventAttendeeResponse includes user details (firstName, lastName, email) by accessing attendee.user properties
---

## Iteration 18 - Update ScheduleEventResponse with RSVP data
- Updated ScheduleEventResponse data class to include RSVP and attendance fields
- Added 5 new fields: attendingCount, maybeCount, notAttendingCount, userRsvpStatus, userAttended
- Updated fromEntity() companion method signature to accept RSVP counts and optional EventAttendee
- Added EventAttendee import to ScheduleEventDtos.kt
- Files changed:
  - src/main/kotlin/com/hackathon/manager/dto/ScheduleEventDtos.kt
  - PRD.md (marked US-003 complete)
- Learnings for future iterations:
  - Response DTOs can be enhanced with additional optional parameters in fromEntity() to support different contexts
  - Default parameter values (= 0, = null) allow backwards compatibility when updating DTOs
  - RSVP counts are passed separately from the entity since they require aggregation queries
  - userAttendee parameter is nullable to support both authenticated and unauthenticated requests
---

## Iteration 19 - Add isUserRegistered helper to HackathonService
- Added isUserRegistered(hackathonId, userId) method to HackathonService
- Method uses hackathonUserRepository.existsByHackathonIdAndUserId() to return boolean
- Added @Transactional(readOnly = true) annotation following service layer pattern
- Files changed:
  - src/main/kotlin/com/hackathon/manager/service/HackathonService.kt
  - PRD.md (marked US-004 complete)
- Learnings for future iterations:
  - HackathonUserRepository already has existsByHackathonIdAndUserId() method
  - Helper methods in service layer should follow @Transactional(readOnly = true) pattern for read operations
  - isUserRegistered checks if user has ANY role in the hackathon (organizer, judge, admin, or participant)
  - This is useful for RSVP validation - any registered user can RSVP to events
---
