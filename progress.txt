# Progress Log

## Learnings
(Patterns discovered during implementation)

- Backend is Kotlin + Spring Boot in `src/main/kotlin/com/hackathon/manager/`
- Frontend is React + Vite in `frontend/`
- Typecheck: `./gradlew compileKotlin` for backend, `npx tsc --noEmit` for frontend
- Tests: `./gradlew test` for backend (JaCoCo 70% coverage required)
- Existing judging entities: JudgingCriteria, JudgeAssignment, Score
- Existing repositories: JudgingCriteriaRepository, JudgeAssignmentRepository, ScoreRepository
- Existing DTOs: JudgingCriteriaResponse, JudgeAssignmentResponse, ScoreResponse, SubmitScoreRequest, SubmitScoresRequest
- Judges identified by HackathonUser.role = "judge"
- Service classes use constructor injection for dependencies
- HackathonService.isUserOrganizer(hackathonId, userId) returns true for organizers or admins
- DTOs use jakarta.validation.constraints for validation annotations (@NotNull, @Min, @Max)
- JudgingCriteriaRepository.findByHackathonIdOrderByDisplayOrder already exists and returns ordered list

---

## Iteration 1 - US-001: Create JudgingService for criteria management
- What was implemented:
  - Created JudgingService class with dependency injection for repositories
  - Implemented getCriteriaByHackathon(hackathonId) returning list ordered by displayOrder
  - Implemented createCriteria(hackathonId, request, userId) with organizer validation
  - Implemented updateCriteria(criteriaId, request, userId) with organizer validation
  - Implemented deleteCriteria(criteriaId, userId) with organizer validation
  - Added CreateJudgingCriteriaRequest and UpdateJudgingCriteriaRequest DTOs to JudgingDtos.kt
- Files changed:
  - src/main/kotlin/com/hackathon/manager/dto/JudgingDtos.kt (added DTOs)
  - src/main/kotlin/com/hackathon/manager/service/JudgingService.kt (created)
- Learnings for future iterations:
  - Service methods that modify data should include userId param for authorization
  - Use hackathonService.isUserOrganizer() for organizer-only operations
  - @Transactional(readOnly = true) for read-only methods, @Transactional for writes
---

## Iteration 2 - US-002: Create JudgingController for criteria endpoints
- What was implemented:
  - Created JudgingController with base path `/api/judging`
  - GET /api/judging/hackathons/{hackathonId}/criteria - list criteria (public)
  - POST /api/judging/hackathons/{hackathonId}/criteria - create criteria (organizer only)
  - PUT /api/judging/criteria/{criteriaId} - update criteria (organizer only)
  - DELETE /api/judging/criteria/{criteriaId} - delete criteria (organizer only)
- Files changed:
  - src/main/kotlin/com/hackathon/manager/controller/JudgingController.kt (created)
- Learnings for future iterations:
  - Controller uses @AuthenticationPrincipal UserPrincipal to get authenticated user
  - JudgingService methods handle authorization internally (no need to check in controller)
  - GET endpoint for list criteria is public (no auth required)
  - Use ResponseEntity.noContent().build() for DELETE returning 204
  - Use ResponseEntity.status(HttpStatus.CREATED).body() for POST returning 201
---
