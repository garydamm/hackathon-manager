# Progress Log

## Learnings
(Patterns discovered during implementation)

- Repository tests use TestContainers with postgres:16-alpine and @DataJpaTest + AbstractRepositoryTest base class
- Flyway migrations are V1-V7 now; next migration is V8
- Hackathon entity does NOT have a search_vector JPA field (it's managed purely at DB level via trigger)
- Migration pattern: ALTER TABLE, CREATE INDEX, CREATE FUNCTION, CREATE TRIGGER, then backfill UPDATE

---

## Iteration 1 - US-001: Add full-text search infrastructure to database
- Created V7__add_fulltext_search_to_hackathons.sql migration
- Adds search_vector tsvector column, GIN index, trigger function, and backfill
- Trigger fires on INSERT or UPDATE of name/description columns
- Weight A for name, Weight B for description
- Files changed: src/main/resources/db/migration/V7__add_fulltext_search_to_hackathons.sql
- Learnings for future iterations:
  - The search_vector column is not mapped in the Hackathon JPA entity â€” it's DB-only
  - Native SQL queries (@Query(nativeQuery=true)) will be needed for full-text search in the repository
  - Use plainto_tsquery for user-friendly query parsing per PRD
  - Existing tests all pass with the new migration (TestContainers runs Flyway automatically)
---
