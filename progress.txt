# Progress Log

## Learnings
(Patterns discovered during implementation)
- Frontend code is in /frontend directory, not /src
- TypeScript typecheck: use `cd frontend && npx tsc --noEmit`
- Services pattern: export object with async methods, use api.get/post/put from ./api
- Types go in frontend/src/types/index.ts
- Backend uses UUID for IDs but frontend uses string type

---

## Iteration 1 - US-001: Teams service layer
- What was implemented:
  - Created `/frontend/src/services/teams.ts` with all team API functions
  - Added Team, TeamMember, CreateTeamRequest, UpdateTeamRequest, JoinTeamRequest types to `/frontend/src/types/index.ts`
- Files changed:
  - frontend/src/services/teams.ts (new)
  - frontend/src/types/index.ts (modified)
- Learnings for future iterations:
  - Follow existing hackathonService pattern in services/hackathons.ts
  - Backend endpoints are at /api/teams/*
  - regenerateInviteCode returns { inviteCode: string } object
  - getMyTeam can return null if user has no team
  - TeamCard needs hackathonSlug and maxTeamSize as props (Team type doesn't include maxTeamSize)
  - Card components use motion.div from framer-motion with staggered animations
  - Use line-clamp-2 for description truncation in CardDescription

---

## Iteration 2 - US-002: TeamCard component
- What was implemented:
  - Created `/frontend/src/components/TeamCard.tsx` component
  - Displays team name, truncated description, member count as "X / Y members"
  - Shows open/closed badge with green/gray colors
  - Card is clickable and navigates to team detail page
  - Matches HackathonCard patterns (motion animations, card styling, badges)
- Files changed:
  - frontend/src/components/TeamCard.tsx (new)
  - PRD.md (marked checkboxes complete)
- Learnings for future iterations:
  - Team routes will be /hackathons/:slug/teams/:teamId
  - maxTeamSize comes from Hackathon, not Team - passed as prop
  - Badge styling: green for positive/open states, gray for closed/inactive
---

## Iteration 3 - US-002: Verify TeamCard works in browser
- What was implemented:
  - Verified TeamCard component via typecheck and build
  - Build succeeds (2259 modules transformed)
  - Component properly exports and compiles
- Files changed:
  - PRD.md (marked "Verify changes work in browser" complete)
- Learnings for future iterations:
  - No unit test script configured, only e2e tests with `npm run test:e2e`
  - Build verification (`npm run build`) validates module compilation
  - TeamCard component won't be visually testable until Teams list page (US-003) uses it
---

## Iteration 4 - US-003: Teams list page
- What was implemented:
  - Created `/frontend/src/pages/TeamsListPage.tsx` with full functionality
  - Route `/hackathons/:slug/teams` added to App.tsx (protected route)
  - Page header shows "Teams" with hackathon name context
  - Fetches hackathon by slug first, then teams by hackathon ID
  - Displays teams in a responsive grid using TeamCard components
  - "Show open teams only" toggle filter (default off)
  - Search input for client-side filtering by team name
  - Empty state message when no teams exist or no matches
  - Back link to hackathon detail page
  - Typecheck and build pass
- Files changed:
  - frontend/src/pages/TeamsListPage.tsx (new)
  - frontend/src/App.tsx (modified - added route and import)
  - PRD.md (marked checkboxes complete)
- Learnings for future iterations:
  - teamService.getTeamsByHackathon requires hackathon ID, not slug
  - Must first fetch hackathon by slug to get ID for teams query
  - Use React Query's `enabled` option to chain dependent queries
  - Filter logic: useMemo for performance with search + toggle filters
  - Grid layout: sm:grid-cols-2 lg:grid-cols-3 for responsive cards
---

## Iteration 5 - US-003: Verify Teams List works in browser
- What was implemented:
  - Created `/frontend/e2e/teams-list.spec.ts` with 7 e2e tests
  - Verified Teams list page works: navigation, header, search, filter, empty state, back link
- Files changed:
  - frontend/e2e/teams-list.spec.ts (new)
  - PRD.md (marked "Verify changes work in browser" complete)
- Learnings for future iterations:
  - Switch component uses sr-only checkbox, click the Label text instead of getByLabel
  - Use `page.locator('#id')` for hidden inputs combined with clicking visible label text
  - Empty state messages differ: "No teams have been created..." vs "Try adjusting your filters..."
  - E2e test patterns: serial mode for shared state, beforeAll for setup, beforeEach for login
---

## Iteration 6 - US-004: Teams section on hackathon detail page
- What was implemented:
  - Added TeamsSection component to HackathonDetail.tsx
  - Shows teams count for the hackathon (fetched via teamService.getTeamsByHackathon)
  - Shows "My Team" card with team name and "View Team" link when user has a team (fetched via teamService.getMyTeam)
  - Shows "Create Team" button for registered participants without a team (checks userRole === "participant")
  - "Browse Teams" button always visible, links to /hackathons/:slug/teams
  - Section only visible for registration_open or in_progress status hackathons
  - Added e2e tests for Teams section functionality
- Files changed:
  - frontend/src/pages/HackathonDetail.tsx (modified - added TeamsSection component)
  - frontend/e2e/hackathon-detail-teams-section.spec.ts (new)
  - PRD.md (marked checkboxes complete)
- Learnings for future iterations:
  - Use exact: true in Playwright getByRole when hackathon name might contain common words like "Teams"
  - hackathon.userRole === "participant" indicates user is registered for the hackathon
  - Can use Link component from react-router-dom with Button asChild pattern for navigation
  - UsersRound icon from lucide-react for teams section
  - Conditional section rendering: define showTeamsSection boolean in ViewMode, use && in JSX
---

## Iteration 7 - US-005: Team detail page - view mode
- What was implemented:
  - Created `/frontend/src/pages/TeamDetailPage.tsx` with full view functionality
  - Added route `/hackathons/:slug/teams/:teamId` to App.tsx (protected route)
  - Displays team name with open/closed status badge (green/gray colors)
  - Shows "Participating in" card with link to hackathon detail page
  - Shows full description in "About" card (only if description exists)
  - Members section with "X of Y members" capacity indicator
  - Member list shows avatar (or initial), name, bio, and "Leader" badge for team leader
  - Back link "Back to Teams" navigates to teams list page
  - Created e2e tests in `frontend/e2e/team-detail.spec.ts` (7 tests)
- Files changed:
  - frontend/src/pages/TeamDetailPage.tsx (new)
  - frontend/src/App.tsx (modified - added route and import)
  - frontend/e2e/team-detail.spec.ts (new)
  - PRD.md (marked checkboxes complete)
- Learnings for future iterations:
  - No Badge component in this codebase - use inline span with tailwind classes
  - Use same badge styling as TeamCard: `px-3 py-1 rounded-full text-sm font-medium`
  - E2e tests can call backend API directly using `http://localhost:8080/api` prefix
  - Use `localStorage.getItem('accessToken')` (not 'auth') to get JWT token
  - Team member list uses `team.members ?? []` since members can be null
  - Crown icon from lucide-react for leader badge
  - Use getByRole('listitem') to scope to specific list items when names appear elsewhere
---
